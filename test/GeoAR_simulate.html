<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo: simulate location test</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>
<!--latitude: 23.0024088; longitude: 120.2136363;-->
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
		<!--測量系館中心牆角(Project Base Point)gps-entity-place="latitude: 22.9986315; longitude: 120.2200450;"-->
		<a-entity id="1_floor"
		rotation="0 0 0"
		scale="1 1 1"
		gltf-model="../assets/cube/cube_1m.gltf"
		></a-entity>
		<a-entity id="2_floor"
		rotation="0 0 0"
		scale="1 1 1"
		gltf-model="../assets/cube/cube_1m_yellow.gltf"
		></a-entity>
		<a-entity id="3_floor"
		rotation="0 0 0"
		scale="1 1 1"
		gltf-model="../assets/cube/cube_1m_orange.gltf"
		></a-entity>
		<a-entity id="4_floor"
		rotation="0 0 0"
		scale="1 1 1"
		gltf-model="../assets/cube/cube_1m_red.gltf"
		></a-entity>
      <a-camera rotation-reader></a-camera>
	</a-scene>
	
	<script>
		//document.getElementById(camera).gps-camera ="simulateLatitude: 41.890890; simulateLongitude: 12.489357;";
		var e = '0';
		var dataLength = 0;
		var lat = 0;
		var lon = 0;
		var alt = 0;
		jQuery(document).ready(function(){ 
			$.getJSON( "TagTrack.json", function( data ) {
				e = data;
				dataLength = e.data.values.length;
				console.log(dataLength);
				clock();
			});
		});
		function AddGpsCamera(){
			var test = 'simulateLatitude: '+lat+'; simulateLongitude: '+lon+'; simulateAltitude: '+alt+';';
			var camera = document.querySelector('a-camera');
			var gps = document.createAttribute('gps-camera');
			gps.value = test;
			camera.setAttributeNode(gps);
		}
		AddGpsCamera();
		var clock = setInterval(function() {
			//lat += 0.0001;
			lon += 0.0001;
			//alt -= 25;
			
			AddGpsCamera();
			console.log(test);
		}, 1000);
		//document.write('<a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;"><a-entity rotation="0 255 0" scale="1 1 1" gltf-model="./assets/cube/cube_scale.gltf" gps-entity-place="latitude: 23.016623; longitude: 120.228366;"></a-entity><a-camera id="camera" gps-camera="'+ test +'" rotation-reader></a-camera></a-scene>');
		//alert(document.querySelector('#camera').getAttribute('gps-camera'));
		
	</script>
	
  </body>
</html>
